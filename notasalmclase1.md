Aquí tienes tus notas con el formato de Markdown, pero de manera más legible:

# Rundown Clase 1 de 3: Desarrollo de Malware

## Temas principales a cubrir
1. **Entendimiento de la Windows API** y su impacto en el funcionamiento de programas:
   - Explicación extensa de para qué sirve.
   - Recursos donde podemos aprender más sobre ella.
   
2. **Webhooks**:
   - Qué son y cómo utilizarlos.
   
3. **Compilación y Decompilación**:
   - Explicación extensiva del proceso.
   
4. **Ejercicio Práctico**:
   - Programaremos un keylogger.

## Comandos de Compilación e Instalación de Compiladores para el programa
Para instalar el compilador:
```bash
sudo apt install g++-mingw-w64-i686-posix
```

Compilación del programa keylogger:
```bash
i686-w64-mingw32-g++ keylogger.cpp -o keylogger.exe -static
i686-w64-mingw32-g++ keylogger.cpp -o keylogger.exe -static-libgcc -static-libstdc++
```

## Cómo Desarrollar Malware
- **Python**: Sencillo, portable, pero muy detectable y lento.
- **C#**: Medianamente difícil, no tan portable como Python, lento y poco detectable.
- **C/C++**: Medianamente difícil, altamente portable por ser de bajo nivel.
- **Assembly**: Muy difícil, súper portable, extremadamente poco detectable, pero cero escalable.

## Windows API

### ¿Qué es la Windows API?
Un conjunto de aplicaciones y sistemas que permiten a desarrolladores manipular el sistema operativo, sus recursos y funciones de forma sencilla y abstracta.

### ¿Qué es un proceso?
- Un proceso es una instancia de un programa que está cargado en la memoria del sistema. 
  - Contiene una dirección de memoria y un **ID de proceso** (PID).
  - También contiene los permisos de usuario o permisos de ejecución del proceso.
- **Por qué nos interesa manipular procesos**:
  - Permite que nuestras aplicaciones accedan a diferentes partes del sistema sin ser detectadas.
  - En las siguientes clases, veremos **auto-inyección** e **inyección extraída**.
  - La API de Windows permite:
    - Abrir procesos.
    - Editar procesos.
    - Correr código dentro de un proceso legítimo para evadir antivirus.
    - Terminar procesos.

### ¿Qué es la memoria en un sistema y cómo se maneja?
- En sistemas operativos, existe un **administrador de memoria** que:
  - Lleva un registro de los lugares vacíos de memoria.
  - Asigna espacio a nuevos procesos.
  - Libera espacio de procesos terminados.
- La Windows API permite:
  - Asignar memoria.
  - Escribir en memoria.
  - Leer memoria de procesos.

### Registro de Windows
- El **registro de Windows** es una base de datos donde se guarda la configuración del sistema y de las aplicaciones.
- Es un área delicada de manipular, pero muy valiosa.

### Manipulación de Redes
- La API de Windows permite:
  - Crear conexiones a redes externas o internas.
  - Abrir puertos y crear conexiones TCP o UDP.

### Manipulación de Servicios
- Los servicios se ejecutan al iniciar el sistema y usualmente cargan con altos privilegios.
- La API de Windows permite:
  - Crear servicios.
  - Modificar servicios.

### Hooks
- Los **hooks** en la API de Windows permiten a una aplicación interceptar, modificar o monitorear ciertos eventos o mensajes enviados a otros procesos dentro del sistema.
- Estos eventos pueden incluir:
  - Pulsaciones de teclas.
  - Creación de nuevas ventanas.
- Para que un hook funcione:
  - Debe instalarse y ejecutarse como si fuera un filtro.
  - Interceptará el evento deseado y ejecutará una acción con la información obtenida.

## Compilación

1. **Pre-Proceso**:
   - El programa agrega todas las directivas iniciales, como librerías externas si son necesarias.
   - Se genera un archivo con extensión `.i`.

2. **Compilación y Ensamblaje**:
   - Se genera el código para ensamblador (extensión `.s`).
   - Luego se convierte a un archivo objeto o código máquina (`.o` o `.obj`).
   - En el código objeto, se crean "agujeros" donde otros lugares de memoria pueden ser enlazados más adelante.

3. **Enlace a Datos**:
   - Toma el archivo objeto y lo enlaza con datos dentro del disco.
   - Finalmente, se genera la imagen ejecutable (`.exe`).

## Comandos de Compilación (Demostración)
Compilación completa sin pasos:
```bash
gcc compilacion.c -o comp
```

Para obtener el preprocesamiento:
```bash
gcc -E compilacion.c
```

Para obtener el código de ensamblador:
```bash
gcc -S compilacion.c
```

Para obtener el código objeto:
```bash
gcc -c compilacion.c
```

Compilación completa guardando archivos intermedios:
```bash
gcc -save-temps compilacion.c -o compilacion
```

## Documentación Oficial
- **Windows API**: [Documentación de Windows API](https://learn.microsoft.com/en-us/windows/win32/apiindex/windows-api-list)
- **Hooks**: [Documentación de Hooks](https://learn.microsoft.com/en-us/windows/win32/winmsg/hooks)